function epl_generate_inspection_markup(){(new Date).getFullYear();return'<div class="epl-added-inspection"></div><div id="epl-inspection-markup" class="epl-inspection-markup"><input type="text" style="width:6em;" autocomplete="off" id="epl-inspection-date" maxlength="2" size="2" placeholder="01">  From <input class="validate[custom[onlyNumber]]" type="text" autocomplete="off" id="epl-inspection-start-hh" maxlength="2" size="2" placeholder="01">:<input type="text" autocomplete="off" id="epl-inspection-start-mm" maxlength="2" size="2" placeholder="01"> <select id="epl-inspection-start-ampm" class="epl-inspection-ampm"><option value="AM">AM</option><option value="PM">PM</option></select> | To <input class="validate[custom[onlyNumber]]" type="text" autocomplete="off" id="epl-inspection-end-hh" maxlength="2" size="2" placeholder="01">:<input class="validate[custom[onlyNumber]]" type="text" autocomplete="off" id="epl-inspection-end-mm" maxlength="2" size="2" placeholder="01"> <select id="epl-inspection-end-ampm" class="epl-inspection-ampm"><option value="AM">AM</option><option value="PM">PM</option></select><a id="epl-inspection-add" class="button">Add</a></div>'}jQuery(document).ready(function(c){var t,e,a={init:function(){this.admin_listings_map(),a.manual_update(),this.mark_featured(),this.init_conditionals(),this.handle_conditional_fields()},admin_listings_map:function(){if(0==c("#epl_admin_map_canvas").length)return!1;var t=c("#epl_admin_map_canvas").data("address"),n="";if(!window.google)return!1;""==t&&(t=epl_admin_vars.default_map_address),(new google.maps.Geocoder).geocode({address:t},function(t){n=t[0].geometry.location;var e=new google.maps.Map(document.getElementById("epl_admin_map_canvas"),{zoom:14,center:new google.maps.LatLng(n.lat().toString(),n.lng().toString()),mapTypeId:google.maps.MapTypeId.ROADMAP}),a=new google.maps.Marker({position:new google.maps.LatLng(n.lat().toString(),n.lng().toString()),draggable:!0});google.maps.event.addListener(a,"dragend",function(t){c("#property_address_coordinates").val(t.latLng.lat()+", "+t.latLng.lng())}),google.maps.event.addListener(a,"dragstart",function(t){}),e.setCenter(a.position),a.setMap(e)}),c(document.body).on("click",".epl-geocoder-button",function(){var a=c(this);listingUnit=a.closest("form").find("#property_address_sub_number").length?a.closest("form").find("#property_address_sub_number").val():a.closest("form").find("#property_address_lot_number").length?a.closest("form").find("#property_address_lot_number").val():"";var n=listingUnit+" ";c(["property_address_street_number","property_address_street","property_address_suburb","property_address_state","property_address_postal_code","property_address_country"]).each(function(t,e){0<a.closest("form").find("#"+e).length&&(n+=a.closest("form").find("#"+e).val()+" ")}),n=c.trim(n);var o="";(new google.maps.Geocoder).geocode({address:n},function(t){o=t[0].geometry.location;var e=new google.maps.Map(document.getElementById("epl_admin_map_canvas"),{zoom:14,center:new google.maps.LatLng(o.lat().toString(),o.lng().toString()),mapTypeId:google.maps.MapTypeId.ROADMAP}),a=new google.maps.Marker({position:new google.maps.LatLng(o.lat().toString(),o.lng().toString()),draggable:!0});google.maps.event.addListener(a,"dragend",function(t){c("#property_address_coordinates").val(t.latLng.lat()+", "+t.latLng.lng())}),google.maps.event.addListener(a,"dragstart",function(t){}),c("#property_address_coordinates").val(o.lat().toString()+", "+o.lng().toString()),e.setCenter(a.position),a.setMap(e)})})},manual_update:function(){jQuery("#epl_manual_update_lookup").on("click",function(t){t.preventDefault();var e,a=window.location.href.split("?")[0],n=window.location.href.split("?")[1];e=null==n?a+"?epl_manual_update=1":a+"?"+n+"&epl_manual_update=1",window.location.replace(e)})},mark_featured:function(){c(".column-property_featured span").on("click",function(t){var e=c(this),a=c(this).closest("tr").attr("id");a=(a=a.split("-"))[1],c.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"epl_update_featured_listing",id:a,_epl_nonce:epl_admin_vars.ajax_nonce},success:function(t){e.toggleClass("dashicons-star-empty dashicons-star-filled"),"no"==t.featured?e.closest("tr").find(".epl-listing-labels .featured").remove():e.closest("tr").find(".epl-listing-labels").append('<li class="featured">Featured</li>')}})})},init_conditionals:function(){c(".epl-form-field-wrap input, .epl-form-field-wrap select, .epl-form-field-wrap textarea").each(function(t){var e,a,n=c(this).closest(".epl-form-field-wrap"),l=!0,o=c(this).data("show");o&&(e=o.relation||"AND",a=o.fields||{},"AND"==e||"and"==e?c.each(a,function(t,e){var a=e[0],n=e[1],o=e[2];c("#"+a).length&&("="===n?l&=o==c("#"+a).val():"!="===n?l&=o!=c("#"+a).val():">="===n?l&=parseFloat(c("#"+a).val())>=o:"<="===n?l&=parseFloat(c("#"+a).val())<=o:">"===n?l&=parseFloat(c("#"+a).val())>o:"<"===n&&(l&=parseFloat(c("#"+a).val())<o))}):(l=!1,c.each(a,function(t,e){var a=e[0],n=e[1],o=e[2];c("#"+a).length&&("="===n?l=l||o==c("#"+a).val():"!="===n?l=l||o!=c("#"+a).val():">="===n?l=l||parseFloat(c("#"+a).val())>=o:"<="===n?l=l||parseFloat(c("#"+a).val())<=o:">"===n?l=l||parseFloat(c("#"+a).val())>o:"<"===n&&(l=l||parseFloat(c("#"+a).val())<o))})),l?n.show():n.hide())})},handle_conditional_fields:function(){c(".epl-form-field-wrap input, .epl-form-field-wrap select, .epl-form-field-wrap textarea").on("change",function(t){a.init_conditionals()})}};function n(t,e,a){a=a||window.location.href;var n=new RegExp("([?&])"+t+"=.*?(&|#|$)(.*)","gi");if(n.test(a))return null!=e?a.replace(n,"$1"+t+"="+e+"$2$3"):(a=(o=a.split("#"))[0].replace(n,"$1$3").replace(/(&|\?)$/,""),void 0!==o[1]&&null!==o[1]&&(a+="#"+o[1]),a);if(null==e)return a;var o,l=-1!==a.indexOf("?")?"&":"?";return a=(o=a.split("#"))[0]+l+t+"="+e,void 0!==o[1]&&null!==o[1]&&(a+="#"+o[1]),a}a.init(),0<c('input[name="epl_upload_button"]').length&&"undefined"!=typeof wp&&wp.media&&wp.media.editor&&c(document).on("click",'input[name="epl_upload_button"]',function(t){t.preventDefault();var e=c(this),a=e.prev();return wp.media.editor.send.attachment=function(t,e){console.log(e),a.val(e.url)},wp.media.editor.open(e),!1}),c(".dependency-true").each(function(){var t,e=c(this),a=e.attr("data-parent");c('select[name="'+a+'"]').length&&"taxonomy"==e.attr("data-type")&&(t=e.attr("data-default"),c('select[name="'+a+'"]').change(function(){c.ajax({type:"POST",url:ajaxurl,data:{parent_id:c(this).val(),type_name:e.attr("data-type-name"),type:e.attr("data-type"),default_value:t,action:"epl_get_terms_drop_list",_epl_nonce:epl_admin_vars.ajax_nonce},success:function(t){e.html(t)}})}).trigger("change"))}),c(".epldatepicker").length&&c(".epldatepicker").each(function(t){var e=c(this).data("timepicker"),a=c(this).data("format");console.log(a),e=1==e,c(this).epl_datetimepicker({timepicker:e,format:a})}),c("#property_auction").length&&c("#property_auction").epl_datetimepicker({format:"Y-m-d H:i",validateOnBlur:!1,onSelectTime:function(t,e){var a=(a=e.val()).replace(" ","T");e.val(a)},onSelectDate:function(t,e){var a=(a=e.val()).replace(" ","T");e.val(a)},onGenerate:function(t,e){var a=(a=e.val()).replace(" ","T");e.val(a)}}),c("#property_sold_date").length&&c("#property_sold_date").epl_datetimepicker({timepicker:!1,format:"Y-m-d",validateOnBlur:!1,onSelectTime:function(t,e){var a=(a=e.val()).replace(" ","T");e.val(a)},onSelectDate:function(t,e){var a=(a=e.val()).replace(" ","T");e.val(a)},onGenerate:function(t,e){var a=(a=e.val()).replace(" ","T");e.val(a)}}),c("#property_list_date").length&&c("#property_list_date").epl_datetimepicker({timepicker:!1,format:"Y-m-d",validateOnBlur:!1,onSelectTime:function(t,e){var a=(a=e.val()).replace(" ","T");e.val(a)},onSelectDate:function(t,e){var a=(a=e.val()).replace(" ","T");e.val(a)},onGenerate:function(t,e){var a=(a=e.val()).replace(" ","T");e.val(a)}}),c("#property_com_lease_end_date").length&&c("#property_com_lease_end_date").epl_datetimepicker({timepicker:!1,format:"Y-m-d",validateOnBlur:!1,onSelectTime:function(t,e){var a=(a=e.val()).replace(" ","T");e.val(a)},onSelectDate:function(t,e){var a=(a=e.val()).replace(" ","T");e.val(a)},onGenerate:function(t,e){var a=(a=e.val()).replace(" ","T");e.val(a)}}),c("#property_date_available").length&&c("#property_date_available").epl_datetimepicker({timepicker:!1,format:"Y-m-d",validateOnBlur:!1,onSelectTime:function(t,e){var a=(a=e.val()).replace(" ","T");e.val(a)},onSelectDate:function(t,e){var a=(a=e.val()).replace(" ","T");e.val(a)},onGenerate:function(t,e){var a=(a=e.val()).replace(" ","T");e.val(a)}}),c("#property_inspection_times").length&&(c("#property_inspection_times").hide(),t=(t=c("#property_inspection_times").val()).split("\n"),e='<tr class="form-field"><td>'+(e=epl_generate_inspection_markup())+"</td></tr>",c("#property_inspection_times").closest(".form-field").after(e),""!=c.trim(t)&&c.each(t,function(t,e){c(".epl-added-inspection").append('<span><span class="epl-inspection-text">'+e+'</span><span class="del-inspection-time">X</span></span>')}),jQuery("#epl-inspection-date").epl_datetimepicker({timepicker:!1,format:"d-M-Y",closeOnDateSelect:!0,allowBlank:!1}),jQuery("#epl-inspection-start-hh").epl_datetimepicker({datepicker:!1,format:"h",hours12:!0}),jQuery("#epl-inspection-start-mm").epl_datetimepicker({datepicker:!1,format:"i",allowTimes:["00:00","00:05","00:10","00:15","00:20","00:25","00:30","00:35","00:40","00:45","00:50","00:55"]}),jQuery("#epl-inspection-end-hh").epl_datetimepicker({datepicker:!1,format:"h",hours12:!0}),jQuery("#epl-inspection-end-mm").epl_datetimepicker({datepicker:!1,format:"i",allowTimes:["00:00","00:05","00:10","00:15","00:20","00:25","00:30","00:35","00:40","00:45","00:50","00:55"]})),jQuery("form").length&&"function"==typeof jQuery.fn.validationEngine&&jQuery("form").validationEngine(),c(document).on("click",".del-inspection-time",function(){var e=c(this).parent().find(".epl-inspection-text").text(),t=(t=c("#property_inspection_times").val()).split("\n");t=(t=jQuery.grep(t,function(t){return t!=e})).join("\n"),c("#property_inspection_times").val(t),c(this).parent().fadeOut(600,function(){c(this).remove()})}),c(document).on("click","#epl-inspection-add",function(t){t.preventDefault();var e,a=c("#epl-inspection-date").val()+" "+c("#epl-inspection-start-hh").val()+":"+c("#epl-inspection-start-mm").val()+c("#epl-inspection-start-ampm").val()+" to "+c("#epl-inspection-end-hh").val()+":"+c("#epl-inspection-end-mm").val()+c("#epl-inspection-end-ampm").val(),n=c("#property_inspection_times").val();n=n.split("\n"),-1==c.inArray(a,n)&&(n.push(a),e=c('<span><span class="epl-inspection-text">'+a+'</span><span class="del-inspection-time">X</span></span>'),n=n.join("\n"),c("#property_inspection_times").val(n),e.hide().appendTo(".epl-added-inspection").fadeIn(600))}),c(".epl-price-bar").hover(function(){c(this).addClass("shine")},function(){c(this).removeClass("shine")}),jQuery(".epl-fields-tab-menu ul li").click(function(){var t=jQuery(this).attr("data-tab"),e=n("sub_tab",t);history.pushState("","",e),jQuery(".epl-fields-tab-menu ul li").removeClass("epl-fields-menu-current"),jQuery(".epl-fields-single-menu").removeClass("epl-fields-field-current"),jQuery(".epl-field-intro").removeClass("active epl-show-help"),jQuery('[data-help="'+t+'"]').addClass("active epl-show-help"),jQuery(this).addClass("epl-fields-menu-current"),console.log("#tab-menu-"+t),jQuery("#"+t).addClass("epl-fields-field-current")}),c(".epl-upgrade-btn").length&&c(".epl-upgrade-btn").on("click",function(t){t.preventDefault(),function e(){var t=c(".epl-upgrade-btn").data("upgrade"),a=(c(".epl-upgrade-btn"),{action:"epl_upgrade_db",upgrade_to:t,_epl_nonce:epl_admin_vars.ajax_nonce});c(".epl-ajax-notice").show(),c.ajax({method:"POST",url:ajaxurl,data:a,dataType:"json"}).done(function(t){if("success"==t.status){if(c(".epl-ajax-notice").removeClass(" ajax-fail ajax-success").addClass(" ajax-success").html(t.msg),"processing"==t.buffer)try{e()}catch(t){c(".epl-ajax-notice").removeClass(" ajax-fail ajax-success").addClass(" ajax-fail").html("Please reload page & process again.")}}else c(".epl-ajax-notice").removeClass(" ajax-fail ajax-success").addClass(" ajax-fail").html(t.msg)})}()});var o,l,i,s={vars:{contact_card_wrap_editable:c(".epl-contact-card-wrapper .editable"),contact_card_wrap_edit_item:c(".epl-contact-card-wrapper .edit-item"),user_id:c('input[name="contactinfo[user_id]"]'),state_input:c(':input[name="contactinfo[state]"]'),note:c("#epl_contact_activity_content")},init:function(){this.edit_contact(),this.user_search(),this.remove_user(),this.cancel_edit(),this.change_country(),this.add_note(),this.add_note_note_tab(),this.add_listing(),this.delete_checked()},edit_contact:function(){c(document.body).on("click","#edit-contact",function(t){t.preventDefault(),s.vars.contact_card_wrap_editable.hide(),s.vars.contact_card_wrap_edit_item.fadeIn().css("display","block")})},user_search:function(){c(document.body).on("click.eplSelectUser",".epl_user_search_results a",function(t){t.preventDefault();var e=c(this).data("userid");s.vars.user_id.val(e)})},remove_user:function(){c(document.body).on("click","#disconnect-contact",function(t){t.preventDefault();var e={epl_action:"disconnect-userid",contact_id:c('input[name="contactinfo[id]"]').val(),_wpnonce:c("#edit-contact-info #_wpnonce").val()};c.post(ajaxurl,e,function(t){window.location.href},"json")})},cancel_edit:function(){c(document.body).on("click","#epl-edit-contact-cancel",function(t){t.preventDefault(),s.vars.contact_card_wrap_edit_item.hide(),s.vars.contact_card_wrap_editable.show(),c(".epl_user_search_results").html("")})},change_country:function(){c('select[name="contactinfo[country]"]').change(function(){var t=c(this);return data={action:"epl_get_shop_states",country:t.val(),field_name:"contactinfo[state]",_epl_nonce:epl_admin_vars.ajax_nonce},c.post(ajaxurl,data,function(t){"nostates"==t?s.vars.state_input.replaceWith('<input type="text" name="'+data.field_name+'" value="" class="epl-edit-toggles medium-text"/>'):s.vars.state_input.replaceWith(t)}),!1})},add_note_note_tab:function(){c(document.body).on("click","#add-contact-note",function(t){t.preventDefault();var e,a={epl_action:"add-contact-note-note-tab",contact_id:c("#epl-contact-id").val(),listing_id:c("#contact-note-listing").val(),activity_type:c("#contact-activity-type").val(),contact_note:c("#contact-note").val(),add_contact_note_nonce:c("#add_contact_note_nonce").val()};console.log(a),a.contact_note?c.ajax({type:"POST",data:a,url:ajaxurl,success:function(t){c("#epl-contact-notes").prepend(t),c(".epl-no-contact-notes").hide(),c("#contact-note").val("")}}).fail(function(t){window.console&&window.console.log&&console.log(t)}):(e=s.vars.note.css("border-color"),s.vars.note.css("border-color","red"),setTimeout(function(){s.vars.note.css("border-color",e)},500))})},add_note:function(){c(document.body).on("click","#epl_contact_activity_submit",function(t){t.preventDefault();var e,a={epl_action:"add-contact-note",contact_id:c("#epl_contact_id").val(),listing_id:c("#epl_contact_activity_listing").val(),note_type:c("#epl_contact_activity_type").val(),contact_note:s.vars.note.val(),add_contact_note_nonce:c("#add_contact_note_nonce").val()};a.contact_note?c.ajax({type:"POST",data:a,url:ajaxurl,success:function(t){s.vars.note.val(""),c(".epl-contact-activities tbody").prepend(t)}}).fail(function(t){window.console&&window.console.log&&console.log(t)}):(e=s.vars.note.css("border-color"),s.vars.note.css("border-color","red"),setTimeout(function(){s.vars.note.css("border-color",e)},500))})},add_listing:function(){c(document.body).on("click","#contact_listing_submit",function(t){t.preventDefault();var e,a=data=c("#epl_contact_add_listing_form").serialize();(a+="&epl_action=add-contact-listing&contact_id="+c("#epl_contact_id").val()+"&_epl_nonce="+epl_admin_vars.ajax_nonce)?c.ajax({type:"POST",data:a,url:ajaxurl,success:function(t){s.vars.note.val(""),c(".epl-contact-listings tbody").prepend(t)}}).fail(function(t){window.console&&window.console.log&&console.log(t)}):(e=s.vars.note.css("border-color"),s.vars.note.css("border-color","red"),setTimeout(function(){s.vars.note.css("border-color",e)},500))})},delete_checked:function(){c("#epl-contact-delete-confirm").change(function(){var t=c("#epl-contact-delete-records"),e=c("#epl-delete-contact");c(this).prop("checked")?(t.attr("disabled",!1),e.attr("disabled",!1)):(t.attr("disabled",!0),t.prop("checked",!1),e.attr("disabled",!0))})}};s.init(),c(".contact-action-category").on("click",function(t){t.preventDefault(),t.stopPropagation(),jQuery(".epl-contact_category_suggestions").slideToggle(100)}),c(".contact-action-tag").on("click",function(t){t.preventDefault(),t.stopPropagation(),jQuery(".epl-contact-tags-find").slideToggle(100),c("#contact-tag-hint").focus()}),c(document).on("click",function(t){c(".epl-contact_category_suggestions").is(":visible")&&jQuery(".epl-contact_category_suggestions").slideUp(100),c(".epl-contact-tags-find").is(":visible")&&!c(".epl-contact-tags-find > input").is(":focus")&&jQuery(".epl-contact-tags-find").slideUp(100)}),c(".epl-contact_category_suggestions > li >  a").on("click",function(t){t.preventDefault();var e=c(this).data("label");c.ajax({type:"POST",data:{action:"epl_contact_category_update",type:c(this).data("key"),contact_id:c("#epl_contact_id").val(),_epl_nonce:epl_admin_vars.ajax_nonce},dataType:"json",url:ajaxurl,success:function(t){t&&c(".epl-contact-entry-header span").text(e)}})}),c(".epl-contact_tags_suggestions > li").on("click",function(t){t.preventDefault();var a={action:"contact_tags_update",contact_id:c("#epl_contact_id").val(),term_id:c(this).data("id"),bg:c(this).data("bg"),label:c(this).text(),_epl_nonce:epl_admin_vars.ajax_nonce};if(1<=c("#contact-tag-"+a.term_id).length)return!1;c.ajax({type:"POST",data:a,url:ajaxurl,success:function(t){var e;c("#contact-tag-hint").val(""),c(".epl-contact_tags_suggestions > li").hide(),t&&(c("#contact-tag-hint").val(""),e='<li style="background:'+a.bg+'" data-id="'+a.term_id+'" id="contact-tag-'+a.term_id+'">'+a.label+'<span class="dashicons dashicons-no epl-contact-tag-del"></span></li>',c(".epl-contact-assigned-tags").append(e))}})}),c(".epl-contact-assigned-tags").on("click",".epl-contact-tag-del",function(t){t.preventDefault();var e=c(this),a={action:"epl_contact_tag_remove",contact_id:c("#epl_contact_id").val(),term_id:c(this).parent().data("id"),label:c(this).parent().text(),_epl_nonce:epl_admin_vars.ajax_nonce};c.ajax({type:"POST",data:a,url:ajaxurl,success:function(t){t&&e.parent().fadeIn(200).remove()}})}),c("#contact-tag-hint").keyup(function(t){var e=c(this).val();if(""==e)return!1;if(c(".epl-contact_tags_suggestions>li").each(function(){0==c(this).text().toLowerCase().indexOf(e)?c(this).show():c(this).hide()}),13==t.keyCode){var a={action:"contact_tags_update",contact_id:c("#epl_contact_id").val(),term_id:e,bg:"#39b54a",_epl_nonce:epl_admin_vars.ajax_nonce,label:e.charAt(0).toUpperCase()+e.slice(1)};if(1<=c("#contact-tag-"+epl.helpers.string_to_name(a.term_id).length))return!1;c.ajax({type:"POST",data:a,url:ajaxurl,success:function(t){var e;c("#contact-tag-hint").val(""),c(".epl-contact_tags_suggestions > li").hide(),t&&(c("#contact-tag-hint").val(""),e='<li style="background:'+a.bg+'" data-id="'+t+'" id="contact-tag-'+t+'">'+a.term_id+'<span class="dashicons dashicons-no epl-contact-tag-del"></span></li>',c(".epl-contact-assigned-tags").append(e),jQuery(".epl-contact-tags-find").slideUp(100))}})}}),c(".epl-contact-add-activity").on("click",function(){var t="Add New"==c(".epl-contact-add-activity").text()?"Close":"Add New";c(".epl-contact-add-activity").text(t),c("#epl-contact-add-activity-wrap").slideToggle(100)}),c(".epl-contact-add-listing").on("click",function(){c("#epl-contact-add-listing-wrap").slideToggle(100)}),c(".epl-contact-addable:last").after('<span class="epl-contact-add-new-num">add another</span>'),c(".epl-contact-addable-email:last").after('<span class="epl-contact-add-new-email">add another</span>'),c(document).on("click",".epl-contact-add-new-num",function(){var t='\t\t<div class="epl-contact-new-num">\t\t\t<input type="number" maxlength="60" class="epl-contact-sub" name="'+epl.helpers.get_unique_name("phone","contact_phones")+'">\t\t\t<select id="epl-contact-sub-select" type="select" class="epl-contact-note-select" > \t\t\t\t<option value="phone">Phone</option>\t\t\t\t<option value="mobile">Mobile</option>\t\t\t\t<option value="office">Office</option>\t\t\t\t<option value="home">Home</option>\t\t\t</select>\t\t</div>\t\t';c(this).before(t)}),c(document).on("click",".epl-contact-add-new-email",function(){var t='\t\t<div class="epl-contact-new-email">\t\t\t<input type="email" maxlength="60" class="epl-contact-sub" name="'+epl.helpers.get_unique_name("email","contact_emails")+'">\t\t\t<select id="epl-contact-sub-mail" type="select" class="epl-contact-note-select" > \t\t\t\t<option value="email">Email</option>\t\t\t\t<option value="work">Work</option>\t\t\t\t<option value="office">Office</option>\t\t\t\t<option value="home">Home</option>\t\t\t</select>\t\t</div>\t\t';c(this).before(t)}),1==jQuery(".epl-contact-view-more").length&&195<=jQuery(".epl-contact-main-wrapper.left")[0].scrollHeight&&jQuery(".epl-contact-view-more").css("display","block"),jQuery(".epl-contact-view-more").on("click",function(){var t=jQuery(this).closest(".epl-contact-main-wrapper.left").height();t<=190?(jQuery(this).closest(".epl-contact-main-wrapper.left").height("auto"),jQuery(this).css("position","relative").html('<span class="dashicons dashicons-arrow-right-alt epl-contact-icons"></span>View Less')):(jQuery(this).closest(".epl-contact-main-wrapper.left").height("190px"),jQuery(this).css("position","absolute").html('<span class="dashicons dashicons-arrow-right-alt epl-contact-icons"></span>View More')),console.log(t)}),c(document).on("click","#epl-contact-sub-select",function(){var t=epl.helpers.get_unique_name(c(this).val(),"contact_phones");c(this).prev().attr("name",t)}),c(document).on("click","#epl-contact-sub-mail",function(){var t=epl.helpers.get_unique_name(c(this).val(),"contact_emails");c(this).prev().attr("name",t)}),c("#epl-item-tables-wrapper").on("click","th",function(t){t.preventDefault();var e=c(this);c("#epl-contact-table-orderby").val(c(this).data("sort")),console.log(c("#epl-contact-table-orderby").val()),e.hasClass("epl-sorted-desc")?(e.addClass("epl-sorted-asc"),c("#epl-contact-table-order").val("ASC")):(c("#epl-contact-table-order").val("DESC"),e.addClass("epl-sorted-desc"));var a={action:"epl_contact_get_activity_table",contact:c("#epl_contact_id").val(),number:10,paged:1,orderby:c("#epl-contact-table-orderby").val(),order:c("#epl-contact-table-order").val(),_epl_nonce:epl_admin_vars.ajax_nonce};c.ajax({type:"POST",data:a,url:ajaxurl,success:function(t){t&&c("#epl-contact-activity-table-wrapper").html(t)}})}),c(document).on("click",".epl-contact-load-activities",function(t){var e=c(this).data("page"),a={action:"epl_contact_get_activity_table",contact:c("#epl_contact_id").val(),number:10,paged:e,orderby:c("#epl-contact-table-orderby").val(),order:c("#epl-contact-table-order").val(),_epl_nonce:epl_admin_vars.ajax_nonce};c.ajax({type:"POST",data:a,url:ajaxurl,success:function(t){var e,a;0!=t&&(e=c(t).find("tbody").html(),a=c(t).find(".epl-contact-load-activities").data("page"),c("#epl-contact-activity-table-wrapper").find("tbody").append(e),c(".epl-contact-load-activities").data("page",a))}})}),{init:function(){this.date_options()},date_options:function(){c("#epl-graphs-date-options").change(function(){var t=c(this),e=c("#epl-date-range-options");"other"===t.val()?e.show():e.hide()})}}.init(),1==c("#property_owner").length&&(o=null,c("#property_owner").keyup(function(){if(""==c("#property_owner").val())return c(".epl-contact-listing-suggestion").fadeOut(),!1;null!=o&&clearTimeout(o);var t=c(this).val();data={action:"epl_search_contact",user_name:t,_epl_nonce:epl_admin_vars.ajax_nonce},o=setTimeout(function(){o=null,c.ajax({type:"POST",data:data,url:ajaxurl,success:function(t){1==c(".epl-contact-listing-suggestion").length?c(".epl-contact-listing-suggestion").replaceWith(t):c("#property_owner").after(t),c(".epl-contact-listing-suggestion").fadeIn()}})},300)}),c(document.body).on("click",".epl-contact-listing-suggestion li",function(t){c("#property_owner").val(c(this).data("id")),c(".epl-contact-listing-suggestion").fadeOut()})),1==c("#epl_contact_wp_user").length&&(l=null,c("#epl_contact_wp_user").keyup(function(t){var e=t.currentTarget;if(document.body.style.cursor="progress",""==c(e).val())return c(".epl-contact-user-suggestion").fadeOut(),!1;null!=l&&clearTimeout(l);var a=c(this).val();data={action:"epl_search_user",user_name:a,_epl_nonce:epl_admin_vars.ajax_nonce},l=setTimeout(function(){l=null,c.ajax({type:"POST",data:data,url:ajaxurl,success:function(t){document.body.style.cursor="auto",1==c(".epl-contact-user-suggestion").length?c(".epl-contact-user-suggestion").replaceWith(t):c(e).after(t),c(".epl-contact-user-suggestion").fadeIn()}})},300)}),c(document.body).on("click",".epl-contact-user-suggestion li",function(t){c("#epl_contact_wp_user").val(c(this).text()),c("#epl_contact_wp_user_id").val(c(this).data("id")),c(".epl-contact-user-suggestion").fadeOut()})),0<c(".epl-widget-author-username").length&&(l=null,c(".epl-widget-author-username").keyup(function(t){var e=t.currentTarget;if(document.body.style.cursor="progress",""==c(e).val())return c(".epl-contact-user-suggestion").fadeOut(),!1;null!=l&&clearTimeout(l);var a=c(this).val();a=(a=a.split(","))[a.length-1],data={action:"epl_search_user",user_name:a,exclude_roles:"subscriber",_epl_nonce:epl_admin_vars.ajax_nonce},l=setTimeout(function(){l=null,c.ajax({type:"POST",data:data,url:ajaxurl,success:function(t){document.body.style.cursor="auto",1==c(".epl-contact-user-suggestion").length?c(".epl-contact-user-suggestion").replaceWith(t):c(e).after(t),c(".epl-contact-user-suggestion").fadeIn()}})},300)}),c(document.body).on("click",".epl-contact-user-suggestion li",function(t){var e=c(this).closest(".epl-contact-user-suggestion").prev(),a=e.val();curr_val_arr=a.split(","),curr_val_arr.splice(-1,1),a=""==(a=curr_val_arr.join(","))?c(this).data("uname")+",":a+","+c(this).data("uname")+",",e.val(a),c(".epl-contact-user-suggestion").fadeOut().remove()})),1!=c("#property_second_agent").length&&1!=c("#property_agent").length||(l=null,c("#property_second_agent,#property_agent").keyup(function(t){var e=t.currentTarget;if(document.body.style.cursor="progress",""==c(e).val())return c(".epl-contact-user-suggestion").fadeOut(),!1;null!=l&&clearTimeout(l);var a=c(this).val();data={action:"epl_search_user",user_name:a,_epl_nonce:epl_admin_vars.ajax_nonce},l=setTimeout(function(){l=null,c.ajax({type:"POST",data:data,url:ajaxurl,success:function(t){document.body.style.cursor="auto",1==c(".epl-contact-user-suggestion").length?c(".epl-contact-user-suggestion").replaceWith(t):c(e).after(t),c(".epl-contact-user-suggestion").fadeIn()}})},300)}),c(document.body).on("click",".epl-contact-user-suggestion li",function(t){c(this).closest(".epl-contact-user-suggestion").prev().val(c(this).data("uname")),c(".epl-contact-user-suggestion").fadeOut().remove()})),1==c("#epl_contact_listing_search").length&&(i=null,c("#epl_contact_listing_search").keyup(function(){if(""==c("#epl_contact_listing_search").val())return c(".epl-contact-owned-listing-suggestion").fadeOut(),!1;null!=i&&clearTimeout(i);var t=c(this).val();data={action:"epl_search_contact_listing",s:t,contact:c("#epl_contact_id").val(),_epl_nonce:epl_admin_vars.ajax_nonce},i=setTimeout(function(){i=null,c.ajax({type:"POST",data:data,url:ajaxurl,success:function(t){1==c(".epl-contact-owned-listing-suggestion").length?c(".epl-contact-owned-listing-suggestion").replaceWith(t):c("#epl_contact_listing_search").after(t),c(".epl-contact-owned-listing-suggestion").fadeIn()}})},300)}),c(document.body).on("click",".epl-contact-owned-listing-suggestion li",function(t){var e=c(this).data("id");c.ajax({type:"POST",data:{epl_action:"add-existing-contact-listing",contact_id:c("#epl_contact_id").val(),id:e,_epl_nonce:epl_admin_vars.ajax_nonce},url:ajaxurl,success:function(t){c(".epl-contact-listings tbody").prepend(t),c(".epl-contact-owned-listing-suggestion").fadeOut(),c("#epl_contact_listing_search").val("")}})})),c(document.body).on("click.eplSelectUser",".epl_user_search_results span a",function(t){t.preventDefault();var e=c(this).data("login");c(".epl-ajax-user-search").val(e),c(".epl_user_search_results").addClass("hidden"),c(".epl_user_search_results span").html("")}),c(document.body).on("click.eplCancelUserSearch",".epl_user_search_results a.epl-ajax-user-cancel",function(t){t.preventDefault(),c(".epl-ajax-user-search").val(""),c(".epl_user_search_results").addClass("hidden"),c(".epl_user_search_results span").html("")}),c("#epl-contact-add-listing-wrap").on("blur","input",function(t){var e="";e+=""!=c("#property_address_lot_number").val()?c("#property_address_lot_number").val()+"/":"",e+=""!=c("#property_address_sub_number").val()?c("#property_address_sub_number").val()+" ":"",e+=""!=c("#property_address_street_number").val()?c("#property_address_street_number").val()+" ":"",e+=""!=c("#property_address_street").val()?c("#property_address_street").val()+" ":"",e+=""!=c("#property_address_suburb").val()?c("#property_address_suburb").val()+" ":"",e+=""!=c("#property_address_state").val()?c("#property_address_state").val()+" ":"",e+=""!=c("#property_address_postal_code").val()?c("#property_address_postal_code").val()+" ":"",e+=""!=c("#property_address_country").val()?c("#property_address_country").val()+" ":"",c("#post_title").val(e)}),c(document).on("change",".epl_contact_type_filter",function(t){var e=c(this).val();""!=e&&(document.location.href=n("cat_filter",e))}),c(".epl-contact-list-table-tags").on("click",".epl-contact-assigned-tags li",function(t){var e=c(this).data("id");""!=e&&(document.location.href=n("tag_filter",e))}),c(".epl-contact-all-tags-container > span .epl-tag-btn").on("mouseleave",function(t){return!c(this).parent().hasClass("epl-lock")&&void c(this).css({background:"#fff",color:c(this).data("accent")})}),c(".epl-contact-all-tags-container > span .epl-tag-btn").on("mouseenter",function(t){return!c(this).parent().hasClass("epl-lock")&&void c(this).css({background:c(this).data("accent"),color:"#fff"})}),c(document.body).on("click",".epl-contact-all-tags-container > span .epl-tag-btn",function(t){if(par=c(this).parent(),t.preventDefault(),c(this).parent().hasClass("epl-lock"))return!1;par.siblings().removeClass("epl-lock").find(".epl-popup-box").remove(),par.siblings().find(".epl-tag-btn").trigger("mouseleave"),par.toggleClass("epl-lock");1!=c(this).find(".epl-popup-box").length&&c('<div class="epl-popup-box epl-all-tags-single-tag">\n    <span class="epl-single-tag-name">\n        <input type="text" id="epl-single-tag-name-input">\n    </span>\n    <ul class="epl-colors-list" >\n        <li class="epl-color-gray" data-color="#d2d2d2"><b></b></li>\n        <li class="epl-color-green" data-color="#43ac6d"><b></b></li>\n        <li class="epl-color-blue" data-color="#459bc4"><b></b></li>\n        <li class="epl-color-orange" data-color="#f9845b"><b></b></li>\n        <li class="epl-color-purple" data-color="#7d669e"><b></b></li>\n        <li class="epl-color-red" data-color="#ed5a5a"><b></b></li>\n        <li class="epl-color-yellow" data-color="#ecc33f"><b></b></li>\n    </ul>\n    <div class="epl-single-tag-opts">\n        <span data-action="filter" title="Filter" class="dashicons dashicons-filter"></span>\n        <span data-action="delete" title="Trash" class="dashicons dashicons-trash"></span>\n    </div>\n</div>').appendTo(par).slideDown()}),{init:function(){this.update_bg(),this.update_name(),this.delete(),this.filter()},update_bg:function(){c(document.body).on("click",".epl-all-tags-single-tag .epl-colors-list  li",function(t){t.preventDefault();var e=c(this);c(this).siblings().removeClass("active"),c(this).addClass("active");var a={action:"contact_tags_update",term_id:c(this).closest(".epl-lock").find(".epl-tag-btn").data("id"),bg:c(this).data("color"),_epl_nonce:epl_admin_vars.ajax_nonce};c.ajax({type:"POST",data:a,url:ajaxurl,success:function(t){t&&(e.closest(".epl-lock").find(".epl-tag-btn").data("accent",e.data("color")),e.closest(".epl-lock").find(".epl-tag-btn").css("background",e.data("color")))}})})},update_name:function(){c(document.body).on("blur","#epl-single-tag-name-input",function(t){t.preventDefault();var e=c(this),a={action:"contact_tags_update",term_id:c(this).closest(".epl-lock").find(".epl-tag-btn").data("id"),label:c(this).val(),_epl_nonce:epl_admin_vars.ajax_nonce};c.ajax({type:"POST",data:a,url:ajaxurl,success:function(t){t&&e.closest(".epl-lock").find(".epl-tag-btn").text(e.val())}})})},delete:function(){c(document.body).on("click",".epl-single-tag-opts .dashicons-trash",function(t){t.preventDefault();var e=c(this),a={action:"contact_tags_update",term_id:c(this).closest(".epl-lock").find(".epl-tag-btn").data("id"),delete:1,_epl_nonce:epl_admin_vars.ajax_nonce};c.ajax({type:"POST",data:a,url:ajaxurl,success:function(t){t&&e.closest(".epl-lock").fadeOut().remove()}})})},filter:function(){c(document.body).on("click",".epl-single-tag-opts .dashicons-filter",function(t){t.preventDefault();var e=c(this).closest(".epl-lock").find(".epl-tag-btn").data("id");window.location.href="admin.php?page=epl-contacts&tag_filter="+e})}}.init()});